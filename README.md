Spaghetti
=========

Spaghetti provides type-safe communication between JavaScript modules.

[![Build Status](https://travis-ci.org/prezi/spaghetti.svg)](https://travis-ci.org/prezi/spaghetti)
[![Analytics](https://ga-beacon.appspot.com/UA-54695510-1/github.com/prezi/spaghetti)](https://github.com/igrigorik/ga-beacon)

Modularizing a large, evolving JavaScript applications is hard, because the untyped nature of the modules makes it difficult to keep track of changing APIs. Spaghetti uses compilers to check communication between modules, transforming run-time API compatibility problems into compile errors.

## How Does it Work?

Spaghetti modules are written in compile-to-JS languages like [TypeScript](http://typescriptlang.org) and [Haxe](http://haxe.org). Each module's API is defined in a [Spaghetti Interface Definition file](/../../wiki/Spaghetti Syntax). Here's an example of a typical API definition:

```
module com.example.greeter

interface Greeter {
    string sayHello(string guest)
}

Greeter createGreeter()
```

Based on this abstract definition, Spaghetti ensures type safety on both sides of the communiaction:

* When implementing a module, its Spaghetti API gets transpiled into language specific source code. This code declares the API in language-specific terms (i.e. classes and interfaces). Your module's implementation must be compatible with these generated interfaces to be successfully compiled, which in turn ensures conformance to the Spaghetti API. From the above example, the generated code for `Greeter` in a Haxe module looks like this:

    ```haxe
    /* Generated by Spaghetti */
    package com.example.greeter;
    
    interface Greeter {
        function sayHello(guest:String):String;
    }
    ```

* Spaghetti generates language-specific proxy classes to access other modules in a type-safe way, based on those modules' Spaghetti APIs. Here's how you would use `Greeter` from a TypeScript module:

    ```typescript
    var greeter = com.example.greeter.GreeterModule.createGreeter();
    console.log(greeter.sayHello("World"));
    ```

If you make a typo in `sayHello`, or try to pass a `number`, the TypeScript compiler throws an error.

## Try It

Check [the tutorial here](/../../wiki/Tutorial) for a step-by-step introduction to Spaghetti.

There is a working example under [spaghetti-gradle-example](spaghetti-gradle-example). This one uses the Gradle build integration.

## How to Use It?

Spaghetti is a Java-based tool, and requires Java 7 or newer. It has multiple interfaces:

* the [command-line tool](spaghetti) is the quickest way to get working with Spaghetti
* the [Gradle plugins](gradle-spaghetti-plugin/README.md) make it easy to integrate Spaghetti into your workflow
* Maven and other build system support is planned but no deadline has been set yet.

## Documentation

The documentation is [available on the wiki](/../../wiki).

